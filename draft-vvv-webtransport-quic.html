<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>WebTransport over QUIC</title>

  
<style type="text/css">/*<![CDATA[*/

body {
  font: 16px "Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 24px;
  margin: 75px auto;
  max-width: 624px;
  padding: 0 5px;
}

.title, .filename, h1, h2, h3, h4, h5 {
  font: 16px "Roboto Condensed","Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  font-size-adjust: 0.5;
  font-weight: bold;
  color: #333;
  line-height: 100%;
  margin: 1.2em 0 0.3em;
}
.title, #rfc\.title h1 { font-size: 32px; }
h1, section h1, h2, section h2, section h3, nav h2 { font-size: 20px; }
h3, section h4, h4, section h5 { font-size: 16px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header, table#rfc\.headerblock {
  width: 100%;
}
table.header td, table#rfc\.headerblock td {
  border: none;
  background-color: transparent;
  color: black;
  padding: 0;
}
.filename {
  display: block;
  color: rgb(119, 119, 119);
  font-size: 20px;
  font-weight: normal;
  line-height: 100%;
  margin: 10px 0 32px;
}
#rfc\.abstract+p, #rfc\.abstract p {
  font-size: 20px;
  line-height: 28px;
}

samp, tt, code, pre, span.tt {
  font: 13.5px Consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure, caption {
  font-style: italic;
  margin: 0 1.5em;
  text-align: left;
}

address {
  margin: 16px 2px;
  line-height: 20px;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn, address b {
  font-weight: normal;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}
hr.noprint {
  display: none;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

p, ol, ul, li {
  padding: 0;
}
p {
  margin: 0.5em 0;
}
ol, ul {
  margin: 0.2em 0 0.2em 2em;
}
li {
  margin: 0.2em 0;
}
address {
  font-style: normal;
}

ul.toc ul {
  margin: 0 0 0 2em;
}
ul.toc li {
  list-style: none;
  margin: 0;
}

@media screen and (min-width: 924px) {
  body {
    padding-right: 350px;
  }
  body>ul.toc, body>#rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    z-index: 1;
    overflow: auto;
    overscroll-behavior: contain;
  }
  body>#rfc\.toc {
    top: 55px;
  }
  body>ul.toc {
    top: 100px;
  }

  ul.toc {
    margin: 0 0 0 4px;
    font-size: 12px;
    line-height: 20px;
  }
  ul.toc ul {
    margin-left: 1.2em;
  }
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>
  <meta name="viewport" content="initial-scale=1.0">


  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology">
<link href="#rfc.section.2" rel="Chapter" title="2 Protocol Overview">
<link href="#rfc.section.3" rel="Chapter" title="3 Connection Establishment">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Identifying as QuicTransport">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 QuicTransport Handshake">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 Origin Field">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 Path Field">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 0-RTT">
<link href="#rfc.section.4" rel="Chapter" title="4 Streams">
<link href="#rfc.section.5" rel="Chapter" title="5 Datagrams">
<link href="#rfc.section.6" rel="Chapter" title="6 QuicTransport URI Scheme">
<link href="#rfc.section.7" rel="Chapter" title="7 Transport Properties">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 ALPN Value Registration">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Header Fields Registry">
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 URI Scheme Registration">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content="xml2rfc version 2.43.0 - https://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Vasiliev, V." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-vvv-webtransport-quic-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2020-08" />
  <meta name="dct.abstract" content="WebTransport  is a protocol framework that enables clients constrained by the Web security model to communicate with a remote server using a secure multiplexed transport.  This document describes QuicTransport, a transport protocol that uses a dedicated QUIC  connection and provides support for unidirectional streams, bidirectional streams and datagrams. " />
  <meta name="description" content="WebTransport  is a protocol framework that enables clients constrained by the Web security model to communicate with a remote server using a secure multiplexed transport.  This document describes QuicTransport, a transport protocol that uses a dedicated QUIC  connection and provides support for unidirectional streams, bidirectional streams and datagrams. " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">V. Vasiliev</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Google</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">November 8, 2020</td>
</tr>
<tr>
<td class="left">Expires: May 12, 2021</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">WebTransport over QUIC<br />
  <span class="filename">draft-vvv-webtransport-quic-latest</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>WebTransport <a href="#OVERVIEW" class="xref">[OVERVIEW]</a> is a protocol framework that enables clients constrained by the Web security model to communicate with a remote server using a secure multiplexed transport.  This document describes QuicTransport, a transport protocol that uses a dedicated QUIC <a href="#QUIC" class="xref">[QUIC]</a> connection and provides support for unidirectional streams, bidirectional streams and datagrams.</p>
<h1><a>Note to Readers</a></h1>
<p>Discussion of this draft takes place on the WebTransport mailing list (webtransport@ietf.org), which is archived at &lt;https://mailarchive.ietf.org/arch/search/?email_list=webtransport&gt;.</p>
<p>The repository tracking the issues for this draft can be found at &lt;https://github.com/vasilvv/webtransport/issues&gt;.  The web API draft corresponding to this document can be found at &lt;https://w3c.github.io/webtransport/&gt;.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of This Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at https://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 12, 2021.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2020 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Terminology</a>
</li>
</ul><li>2.   <a href="#rfc.section.2">Protocol Overview</a>
</li>
<li>3.   <a href="#rfc.section.3">Connection Establishment</a>
</li>
<ul><li>3.1.   <a href="#rfc.section.3.1">Identifying as QuicTransport</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">QuicTransport Handshake</a>
</li>
<ul><li>3.2.1.   <a href="#rfc.section.3.2.1">Origin Field</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">Path Field</a>
</li>
</ul><li>3.3.   <a href="#rfc.section.3.3">0-RTT</a>
</li>
</ul><li>4.   <a href="#rfc.section.4">Streams</a>
</li>
<li>5.   <a href="#rfc.section.5">Datagrams</a>
</li>
<li>6.   <a href="#rfc.section.6">QuicTransport URI Scheme</a>
</li>
<li>7.   <a href="#rfc.section.7">Transport Properties</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<ul><li>9.1.   <a href="#rfc.section.9.1">ALPN Value Registration</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">Header Fields Registry</a>
</li>
<li>9.3.   <a href="#rfc.section.9.3">URI Scheme Registration</a>
</li>
</ul><li>10.   <a href="#rfc.references">References</a>
</li>
<ul><li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
</ul><li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">WebTransport <a href="#OVERVIEW" class="xref">[OVERVIEW]</a> is a protocol framework that enables clients constrained by the Web security model to communicate with a remote server using a secure multiplexed transport.  This document describes QuicTransport, a transport protocol that uses a dedicated QUIC <a href="#QUIC" class="xref">[QUIC]</a> connection and provides support for unidirectional streams, bidirectional streams and datagrams.</p>
<p id="rfc.section.1.p.2">QUIC <a href="#QUIC" class="xref">[QUIC]</a> is a UDP-based multiplexed secure transport.  It is the underlying protocol for HTTP/3 <a href="#I-D.ietf-quic-http" class="xref">[I-D.ietf-quic-http]</a>, and as such is reasonably expected to be available in web browsers and server-side web frameworks.  This makes it a compelling transport to base a WebTransport protocol on.</p>
<p id="rfc.section.1.p.3">This document defines QuicTransport, a protocol conforming to the WebTransport protocol framework. QuicTransport is an application protocol running directly over QUIC.  The protocol is designed to have low implementation overhead on the server side, meaning that server software that already has a working QUIC implementation available would not require large amounts of code to implement QuicTransport.  Where possible, WebTransport concepts are mapped directly to the corresponding QUIC concepts.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#terminology" id="terminology">Terminology</a>
</h1>
<p id="rfc.section.1.1.p.1">The keywords &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;NOT RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in BCP 14 <a href="#RFC2119" class="xref">[RFC2119]</a> <a href="#RFC8174" class="xref">[RFC8174]</a> when, and only when, they appear in all capitals, as shown here.</p>
<p id="rfc.section.1.1.p.2">This document follows terminology defined in Section 1.2 of <a href="#OVERVIEW" class="xref">[OVERVIEW]</a>.  The diagrams describe encoding following the conventions described in Section 1.3 of <a href="#QUIC" class="xref">[QUIC]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#protocol-overview" id="protocol-overview">Protocol Overview</a>
</h1>
<p id="rfc.section.2.p.1">Each instance of QuicTransport uses a single dedicated QUIC connection.  This allows the peers to exercise a greater level of control over the way their data is being transmitted.  However, this also means that multiple instances of QuicTransport cannot be pooled, and thus do not benefit from sharing a congestion controller with other connections.</p>
<p id="rfc.section.2.p.2">QuicTransport is designed to be a minimal extension of QUIC, and as such does not provide much higher-level functionality, such as pooling, exchanging metadata at session establishment, redirects, and other similar capabilties not provided by QUIC itself.  Http3Transport <a href="#I-D.vvv-webtransport-http3" class="xref">[I-D.vvv-webtransport-http3]</a> can be used in situations where these features are desired.</p>
<p id="rfc.section.2.p.3">When a client requests a QuicTransport session to be created, the user agent establishes a QUIC connection to the specified address.  It verifies that the the server is a QuicTransport endpoint using ALPN, and additionally sends a set of headers containing the requested path and the origin of the initiating website to the server.  At that point, the connection is ready from the client&#8217;s perspective.  The server MUST wait until it processes client headers before processing any other application data.</p>
<p id="rfc.section.2.p.4">WebTransport streams are provided by creating an individual unidirectional or bidirectional QUIC stream.  WebTransport datagrams are provided through the QUIC datagram extension <a href="#QUIC-DATAGRAM" class="xref">[QUIC-DATAGRAM]</a>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#connection" id="connection">Connection Establishment</a>
</h1>
<p id="rfc.section.3.p.1">In order to establish a QuicTransport session, a QUIC connection must be established.  From the client perspective, the session becomes established when the client both have received a TLS Finished message from the server and has sent its headers.  From the server perspective, the session is established after the client headers have been successfully processed.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#identifying-as-quictransport" id="identifying-as-quictransport">Identifying as QuicTransport</a>
</h1>
<p id="rfc.section.3.1.p.1">In order to identify itself as a WebTransport application, QuicTransport relies on TLS Application-Layer Protocol Negotiation <a href="#RFC7301" class="xref">[RFC7301]</a>.  The user agent MUST request the ALPN value of &#8220;wq-vvv-03&#8221; and it MUST close the connection unless the server confirms that ALPN value.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#quictransport-handshake" id="quictransport-handshake">QuicTransport Handshake</a>
</h1>
<p id="rfc.section.3.2.p.1">In order to verify that the client&#8217;s origin is allowed to connect to the server in question, the user agent has to communicate the origin to the server.  This is accomplished by performing a handshake on the first client-initiated bidirectional stream, stream 0.  The handshake is performed as follows:</p>
<p></p>

<ol>
<li>The client sends its headers on stream 0.</li>
<li>The client sends FIN on stream 0.  This indicates that all headers have been sent, and the server can now process them.</li>
<li>The server processes the headers and makes access control decision based on the origin.  Before this happens, the server MUST NOT process any non-header application data receiver from the client, or send its own header block.</li>
<li>The server sends its header block on stream 0, followed by a FIN indicating that the handshake has been successfully completed.</li>
</ol>
<p id="rfc.section.3.2.p.3">The QuicTransport header stream payload SHALL be a header block.  A header block is a sequence of key-value pairs that are formatted in the following way:</p>
<div id="rfc.figure.1"></div>
<div id="fig-frame"></div>
<pre>
Header {
  Header Name Length (16),
  Header Name (..),
  Header Value Length (16),
  Header Value (..),
}

QuicTransport Headers {
  Header (..) ...,
}
</pre>
<p class="figure">Figure 1: QuicTransport Header Format</p>
<p id="rfc.section.3.2.p.4">The pair includes the following fields:</p>
<p></p>

<dl>
<dt>Name:</dt>
<dd style="margin-left: 8">Indicates the name of the field that is being expressed.  The name of the field is case-insensitive, and when encoded on the wire, it MUST consist of ASCII characters in range from <samp>a</samp> to <samp>z</samp>, <samp>0</samp> to <samp>9</samp>, <samp>-</samp>, or <samp>.</samp>.  It MUST begin with an alphanumeric character.</dd>
<dt>Value:</dt>
<dd style="margin-left: 8">The value of the header field, the semantics of which are determined by the name.</dd>
</dl>
<p id="rfc.section.3.2.p.6">A FIN on the stream 0 SHALL indicate that the message is complete.  The client MUST send the entirety of the header block and a FIN immediately after opening the connection.  Before receiving the entirety of the headers, the server MUST NOT process any datagrams or any data on streams other than 0.  The total length of a header block MUST NOT exceed 1,048,576 bytes; implementations MAY impose additional limit on the header block size.</p>
<p id="rfc.section.3.2.p.7">In order to ensure that the user agent can send the headers immediately, the server MUST set <samp>initial_max_streams_bidi</samp> transport parameter to at least <samp>1</samp>.  The user agent MUST close the connection if the server sets <samp>initial_max_streams_bidi</samp> to <samp>0</samp>.</p>
<p id="rfc.section.3.2.p.8">The server MUST ignore any field it does not recognize.  All of the fields MUST be unique;  the server MAY close the connection if any of the keys is used more than once.</p>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> <a href="#origin-field" id="origin-field">Origin Field</a>
</h1>
<p id="rfc.section.3.2.1.p.1">In order to allow the server to enforce its origin policy, the user agent has to communicate the origin in the handshake.  This can be accomplished using the &#8220;Origin&#8221; field:</p>
<p></p>

<dl>
<dt>Name:</dt>
<dd style="margin-left: 8">Origin</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">The origin <a href="#RFC6454" class="xref">[RFC6454]</a> of the client initiating the connection.</dd>
</dl>
<p id="rfc.section.3.2.1.p.3">The user agent MUST send the &#8220;Origin&#8221; field.  The &#8220;Origin&#8221; field MUST be set to the origin of the client initiating the connection, serialized as described in the &#8220;serializing a request origin&#8221; section of <a href="#FETCH" class="xref">[FETCH]</a>.</p>
<p id="rfc.section.3.2.1.p.4">The server indicates that it accepts the origin by sending its header block and a FIN on the stream 0.  If the server does not accept the origin, it MUST close the connection.</p>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> <a href="#path-field" id="path-field">Path Field</a>
</h1>
<p id="rfc.section.3.2.2.p.1">In order to allow multiplexing multiple application on the same host-port tuple, QuicTransport allows specifying extra routing information in the path component of the URI.  That component is communicated using the &#8220;Path&#8221; header:</p>
<p></p>

<dl>
<dt>Name:</dt>
<dd style="margin-left: 8">Path</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">The path component of the QuicTransport URI.</dd>
</dl>
<p id="rfc.section.3.2.2.p.3">The user agent MUST send a non-empty &#8220;Path&#8221; field.  When the connection is initiated through a URI <a href="#uri" class="xref">Section 6</a>, that value SHALL be the <samp>path-abempty</samp> part, followed by a concatenation of the <samp>?</samp> literal and the <samp>query</samp> componenet if such is present.  In case when <samp>path-abempty</samp> is empty, the value sent SHALL be <samp>/</samp>.</p>
<p id="rfc.section.3.2.2.p.4">Unlike HTTP, the <samp>authority</samp> portion of the URL is not communicated in the headers.  As QuicTransport has its own connection dedicated to it, the host name portion can be retrieved from the <samp>server_name</samp> TLS extension <a href="#RFC6066" class="xref">[RFC6066]</a>.</p>
<p id="rfc.section.3.2.2.p.5">The server MAY use the value of the &#8220;Path&#8221; field in any way defined by the target application.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#rtt" id="rtt">0-RTT</a>
</h1>
<p id="rfc.section.3.3.p.1">QuicTransport provides applications with the ability to use the 0-RTT feature described in <a href="#RFC8446" class="xref">[RFC8446]</a> and <a href="#QUIC" class="xref">[QUIC]</a>.  0-RTT allows a client to send data before the TLS session is fully established.  It provides lower latency, but has the drawback of being vulnerable to replay attacks.  Since only the application can make an informed decision as to whether some data is safe to send in that context, 0-RTT requires the client API to only send data over 0-RTT when specifically requested by the client.</p>
<p id="rfc.section.3.3.p.2">0-RTT support in QuicTransport is OPTIONAL, as it is in QUIC and TLS 1.3.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#streams" id="streams">Streams</a>
</h1>
<p id="rfc.section.4.p.1">QuicTransport unidirectional and bidirectional streams are created by creating a QUIC stream of the corresponding type.  All other operations (read, write, close) are also mapped directly to the operations defined in <a href="#QUIC" class="xref">[QUIC]</a>.  The QUIC stream IDs are the stream IDs that are exposed to the application.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#datagrams" id="datagrams">Datagrams</a>
</h1>
<p id="rfc.section.5.p.1">QuicTransport uses the QUIC DATAGRAM frame <a href="#QUIC-DATAGRAM" class="xref">[QUIC-DATAGRAM]</a> to provide WebTransport datagrams.  A QuicTransport endpoint MUST negotiate and support the DATAGRAM frame.  The datagrams provided by the application are sent as-is.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#uri" id="uri">QuicTransport URI Scheme</a>
</h1>
<p id="rfc.section.6.p.1">NOTE: the URI scheme definition in this section is provisional and subject to change, especially the name of the scheme.</p>
<p id="rfc.section.6.p.2">QuicTransport uses the <samp>quic-transport</samp> URI scheme for identifying QuicTransport servers.</p>
<p id="rfc.section.6.p.3">The syntax definition below uses Augmented Backus-Naur Form (ABNF) <a href="#RFC5234" class="xref">[RFC5234]</a>.  The definitions of <samp>host</samp>, <samp>port</samp>, <samp>path-abempty</samp>, <samp>query</samp> and <samp>fragment</samp> are adopted from <a href="#RFC3986" class="xref">[RFC3986]</a>.  The syntax of a QuicTransport URI SHALL be:</p>
<pre>
quic-transport-URI = "quic-transport:" "//"
                             host [ ":" port ]
                             path-abempty
                             [ "?" query ]
                             [ "#" fragment ]
</pre>
<p id="rfc.section.6.p.4">The <samp>path-abempty</samp> and the <samp>query</samp> portions of the URI are communicated to the server in the headers as described in <a href="#path-field" class="xref">Section 3.2.2</a>.  The <samp>quic-transport</samp> URI scheme supports the <samp>/.well-known/</samp> path prefix defined in <a href="#RFC8615" class="xref">[RFC8615]</a>.</p>
<p id="rfc.section.6.p.5">This document does not assign any semantics to the <samp>fragment</samp> portion of the URI.  Any QuicTransport implementation MUST ignore those until a subsequent specification assigns semantics to those.</p>
<p id="rfc.section.6.p.6">The <samp>host</samp> component MUST NOT be empty.  If the <samp>port</samp> component is missing, the port SHALL be assumed to be 0.</p>
<p id="rfc.section.6.p.7">In order to connect to a QuicTransport server identified by a given URI, the user agent SHALL establish a QUIC connection to the specified <samp>host</samp> and <samp>port</samp> as described in <a href="#connection" class="xref">Section 3</a>.  It MUST immediately signal an error to the client if the port value is 0.</p>
<p id="rfc.section.6.p.8">NOTE: this effectively requires the port number to be specified.  This specification may include an actually usable default port number in the future.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#transport-properties" id="transport-properties">Transport Properties</a>
</h1>
<p id="rfc.section.7.p.1">QuicTransport supports most WebTransport features as described in <a href="#properties" class="xref">Table 1</a>.</p>
<div id="rfc.table.1"></div>
<div id="properties"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>Transport properties of QuicTransport</caption>
<thead><tr>
<th class="left">Property</th>
<th class="left">Support</th>
</tr></thead>
<tbody>
<tr>
<td class="left">Stream independence</td>
<td class="left">Always supported</td>
</tr>
<tr>
<td class="left">Partial reliability</td>
<td class="left">Always supported</td>
</tr>
<tr>
<td class="left">Pooling support</td>
<td class="left">Not supported</td>
</tr>
<tr>
<td class="left">Connection mobility</td>
<td class="left">Implementation-dependent</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">QuicTransport satisfies all of the security requirements imposed by <a href="#OVERVIEW" class="xref">[OVERVIEW]</a> on WebTransport protocols, thus providing a secure framework for client-server communication in cases when the the client is potentially untrusted.</p>
<p id="rfc.section.8.p.2">QuicTransport uses QUIC with TLS, and as such, provides the full range of security properties provided by TLS, including confidentiality, integrity and authentication of the server.</p>
<p id="rfc.section.8.p.3">QUIC is a client-server protocol where a client cannot send data until either the handshake is complete or a previously established session is resumed.  This ensures that clients cannot send data to a network endpoint that has not accepted an incoming connection.  Furthermore, the QuicTransport session can be immediately aborted by the server through a connection close or a stateless reset, causing the user agent to stop the traffic from the client.  This provides a defense against potential denial-of-service attacks on the network by untrusted clients.</p>
<p id="rfc.section.8.p.4">QUIC provides a congestion control mechanism <a href="#I-D.ietf-quic-recovery" class="xref">[I-D.ietf-quic-recovery]</a> that limits the rate at which the traffic is sent.  This prevents potentially malicious clients from overloading the network.</p>
<p id="rfc.section.8.p.5">WebTransport requires user agents to continually verify that the server is still interested in talking to them.  QuicTransport accomplishes that by virtue of QUIC being an acknowledgement-based protocol; if the client is attempting to send data, and the server does not send any ACK frames in response, the client side of the QUIC connection will time out.</p>
<p id="rfc.section.8.p.6">QuicTransport prevents WebTransport clients from connecting to arbitrary non-Web servers through the use of ALPN.  Unlike TLS over TCP, successful ALPN negotiation is mandatory in QUIC.  Thus, unless the server explicitly picks the QuicTransport ALPN value, the TLS handshake will fail.</p>
<p id="rfc.section.8.p.7">QuicTransport uses a unidirectional QUIC stream to provide the server with the origin of the client.</p>
<p id="rfc.section.8.p.8">In order to avoid the use of QuicTransport to scan internal networks, the user agents MUST NOT allow the clients to distinguish different connection errors before the correct ALPN is received from the server.</p>
<p id="rfc.section.8.p.9">Since each instance of QuicTransport opens a new connection, a malicious client can cause resource exhaustion, both on the local system (through depleting file descriptor space or other per-connection resources) and on a given remote server.  Because of that, user agents SHOULD limit the amount of simultaneous connections opened.  The server MAY limit the amount of open connections from a given client.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#iana-considerations" id="iana-considerations">IANA Considerations</a>
</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#alpn-value-registration" id="alpn-value-registration">ALPN Value Registration</a>
</h1>
<p id="rfc.section.9.1.p.1">The following entry is added to the &#8220;Application Layer Protocol Negotiation (ALPN) Protocol IDs&#8221; registry established by <a href="#RFC7301" class="xref">[RFC7301]</a>:</p>
<p id="rfc.section.9.1.p.2">The &#8220;wq-vvv-03&#8221; label identifies QUIC used as a protocol for WebTransport:</p>
<p></p>

<dl>
<dt>Protocol:</dt>
<dd style="margin-left: 8">QuicTransport</dd>
<dt>Identification Sequence:</dt>
<dd style="margin-left: 8">0x77 0x71 0x2d 0x76 0x76 0x76 0x2d 0x30 0x33 (&#8220;wq-vvv-03&#8221;)</dd>
<dt>Specification:</dt>
<dd style="margin-left: 8">This document</dd>
</dl>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> <a href="#header-fields-registry" id="header-fields-registry">Header Fields Registry</a>
</h1>
<p id="rfc.section.9.2.p.1">IANA SHALL add a registry for &#8220;QuicTransport Header Fields&#8221; registry.  Every entry in the registry SHALL include the following fields:</p>
<p></p>

<dl>
<dt>Name:</dt>
<dd style="margin-left: 8">The name of the field.</dd>
<dt>Description:</dt>
<dd style="margin-left: 8">A brief description of what the parameter does.</dd>
<dt>Reference:</dt>
<dd style="margin-left: 8">The document that describes the parameter.</dd>
</dl>
<p id="rfc.section.9.2.p.3">The IANA policy, as described in <a href="#RFC8126" class="xref">[RFC8126]</a>, SHALL be Expert Review.</p>
<h1 id="rfc.section.9.3">
<a href="#rfc.section.9.3">9.3.</a> <a href="#uri-scheme-registration" id="uri-scheme-registration">URI Scheme Registration</a>
</h1>
<p id="rfc.section.9.3.p.1">This document contains the request for the registration of the URI scheme <samp>quic-transport</samp>.  The registration request is in accordance with <a href="#RFC7595" class="xref">[RFC7595]</a>.</p>
<p></p>

<dl>
<dt>Scheme name:</dt>
<dd style="margin-left: 8">quic-transport</dd>
<dt>Status:</dt>
<dd style="margin-left: 8">Permanent</dd>
<dt>Applications/protocols that use this scheme name:</dt>
<dd style="margin-left: 8">QuicTransport</dd>
<dt>Contact:</dt>
<dd style="margin-left: 8">IETF Chair <a href="mailto:chair@ietf.org">chair@ietf.org</a>
</dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">IESG <a href="mailto:iesg@ietf.org">iesg@ietf.org</a>
</dd>
<dt>Reference:</dt>
<dd style="margin-left: 8">
<a href="#uri" class="xref">Section 6</a> of this document.</dd>
<dt>Well-Known URI Support:</dt>
<dd style="margin-left: 8">
<a href="#uri" class="xref">Section 6</a> of this document.</dd>
</dl>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="FETCH">[FETCH]</b></td>
<td class="top">
<a>WHATWG</a>, "<a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>", November 2020.</td>
</tr>
<tr>
<td class="reference"><b id="OVERVIEW">[OVERVIEW]</b></td>
<td class="top">
<a title="Google">Vasiliev, V.</a>, "<a href="https://tools.ietf.org/html/draft-ietf-webtrans-overview-latest">The WebTransport Protocol Framework</a>", Internet-Draft draft-ietf-webtrans-overview-latest</td>
</tr>
<tr>
<td class="reference"><b id="QUIC">[QUIC]</b></td>
<td class="top">
<a title="Fastly">Iyengar, J.</a> and <a title="Mozilla">M. Thomson</a>, "<a href="https://tools.ietf.org/html/draft-ietf-quic-transport-latest">QUIC: A UDP-Based Multiplexed and Secure Transport</a>", Internet-Draft draft-ietf-quic-transport-latest</td>
</tr>
<tr>
<td class="reference"><b id="QUIC-DATAGRAM">[QUIC-DATAGRAM]</b></td>
<td class="top">
<a title="Apple">Pauly, T.</a>, <a title="Apple">Kinnear, E.</a> and <a title="Google">D. Schinazi</a>, "<a href="https://tools.ietf.org/html/draft-pauly-quic-datagram-latest">An Unreliable Datagram Extension to QUIC</a>", Internet-Draft draft-pauly-quic-datagram-latest</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a>Bradner, S.</a>, "<a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3986">[RFC3986]</b></td>
<td class="top">
<a>Berners-Lee, T.</a>, <a>Fielding, R.</a> and <a>L. Masinter</a>, "<a href="https://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, DOI 10.17487/RFC3986, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="https://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, DOI 10.17487/RFC5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6454">[RFC6454]</b></td>
<td class="top">
<a>Barth, A.</a>, "<a href="https://tools.ietf.org/html/rfc6454">The Web Origin Concept</a>", RFC 6454, DOI 10.17487/RFC6454, December 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7301">[RFC7301]</b></td>
<td class="top">
<a>Friedl, S.</a>, <a>Popov, A.</a>, <a>Langley, A.</a> and <a>E. Stephan</a>, "<a href="https://tools.ietf.org/html/rfc7301">Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension</a>", RFC 7301, DOI 10.17487/RFC7301, July 2014.</td>
</tr>
<tr>
<td class="reference"><b id="RFC7595">[RFC7595]</b></td>
<td class="top">
<a>Thaler, D.</a>, <a>Hansen, T.</a> and <a>T. Hardie</a>, "<a href="https://tools.ietf.org/html/rfc7595">Guidelines and Registration Procedures for URI Schemes</a>", BCP 35, RFC 7595, DOI 10.17487/RFC7595, June 2015.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8126">[RFC8126]</b></td>
<td class="top">
<a>Cotton, M.</a>, <a>Leiba, B.</a> and <a>T. Narten</a>, "<a href="https://tools.ietf.org/html/rfc8126">Guidelines for Writing an IANA Considerations Section in RFCs</a>", BCP 26, RFC 8126, DOI 10.17487/RFC8126, June 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8174">[RFC8174]</b></td>
<td class="top">
<a>Leiba, B.</a>, "<a href="https://tools.ietf.org/html/rfc8174">Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words</a>", BCP 14, RFC 8174, DOI 10.17487/RFC8174, May 2017.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8446">[RFC8446]</b></td>
<td class="top">
<a>Rescorla, E.</a>, "<a href="https://tools.ietf.org/html/rfc8446">The Transport Layer Security (TLS) Protocol Version 1.3</a>", RFC 8446, DOI 10.17487/RFC8446, August 2018.</td>
</tr>
<tr>
<td class="reference"><b id="RFC8615">[RFC8615]</b></td>
<td class="top">
<a>Nottingham, M.</a>, "<a href="https://tools.ietf.org/html/rfc8615">Well-Known Uniform Resource Identifiers (URIs)</a>", RFC 8615, DOI 10.17487/RFC8615, May 2019.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-quic-http">[I-D.ietf-quic-http]</b></td>
<td class="top">
<a>Bishop, M.</a>, "<a href="https://tools.ietf.org/html/draft-ietf-quic-http-32">Hypertext Transfer Protocol Version 3 (HTTP/3)</a>", Internet-Draft draft-ietf-quic-http-32, October 2020.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-quic-recovery">[I-D.ietf-quic-recovery]</b></td>
<td class="top">
<a>Iyengar, J.</a> and <a>I. Swett</a>, "<a href="https://tools.ietf.org/html/draft-ietf-quic-recovery-32">QUIC Loss Detection and Congestion Control</a>", Internet-Draft draft-ietf-quic-recovery-32, October 2020.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.vvv-webtransport-http3">[I-D.vvv-webtransport-http3]</b></td>
<td class="top">
<a>Vasiliev, V.</a>, "<a href="https://tools.ietf.org/html/draft-vvv-webtransport-http3-02">WebTransport over HTTP/3</a>", Internet-Draft draft-vvv-webtransport-http3-02, June 2020.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6066">[RFC6066]</b></td>
<td class="top">
<a>Eastlake 3rd, D.</a>, "<a href="https://tools.ietf.org/html/rfc6066">Transport Layer Security (TLS) Extensions: Extension Definitions</a>", RFC 6066, DOI 10.17487/RFC6066, January 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Victor Vasiliev</span> 
	  <span class="n hidden">
		<span class="family-name">Vasiliev</span>
	  </span>
	</span>
	<span class="org vcardline">Google</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:vasilvv@google.com">vasilvv@google.com</a></span>

  </address>
</div>

</body>
</html>
