<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>WebTransport over HTTP/3</title>
<meta content="Victor Vasiliev" name="author">
<meta content="
       WebTransport   is a protocol framework that enables clients
constrained by the Web security model to communicate with a remote server using
a secure multiplexed transport.  This document describes a WebTransport
protocol that is based on HTTP/3   and provides support for
unidirectional streams, bidirectional streams and datagrams, all multiplexed
within the same HTTP/3 connection. 
    " name="description">
<meta content="xml2rfc 3.5.0" name="generator">
<meta content="draft-vvv-webtransport-http3-latest" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.8.7
    appdirs 1.4.4
    ConfigArgParse 1.2.3
    google-i18n-address 2.3.2
    html5lib 1.1
    intervaltree 3.0.2
    Jinja2 2.11.2
    kitchen 1.2.6
    lxml 4.5.2
    pycairo 1.16.2
    pycountry 20.7.3
    pyflakes 2.2.0
    PyYAML 5.3.1
    requests 2.24.0
    setuptools 51.1.0
    six 1.15.0
    WeasyPrint 51
-->
<link href="draft-vvv-webtransport-http3.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">

<style type="text/css">/*<![CDATA[*/

body {
  font: 16px "Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 24px;
  margin: 75px auto;
  max-width: 624px;
  padding: 0 5px;
}

.title, .filename, h1, h2, h3, h4, h5 {
  font: 16px "Roboto Condensed","Helvetica Neue","Open Sans",Helvetica,Calibri,sans-serif;
  font-size-adjust: 0.5;
  font-weight: bold;
  color: #333;
  line-height: 100%;
  margin: 1.2em 0 0.3em;
}
.title, #rfc\.title h1 { font-size: 32px; }
h1, section h1, h2, section h2, section h3, nav h2 { font-size: 20px; }
h3, section h4, h4, section h5 { font-size: 16px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header, table#rfc\.headerblock {
  width: 100%;
}
table.header td, table#rfc\.headerblock td {
  border: none;
  background-color: transparent;
  color: black;
  padding: 0;
}
.filename {
  display: block;
  color: rgb(119, 119, 119);
  font-size: 20px;
  font-weight: normal;
  line-height: 100%;
  margin: 10px 0 32px;
}
#rfc\.abstract+p, #rfc\.abstract p {
  font-size: 20px;
  line-height: 28px;
}

samp, tt, code, pre, span.tt {
  font: 13.5px Consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure, caption {
  font-style: italic;
  margin: 0 1.5em;
  text-align: left;
}

address {
  margin: 16px 2px;
  line-height: 20px;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn, address b {
  font-weight: normal;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}
hr.noprint {
  display: none;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

p, ol, ul, li {
  padding: 0;
}
p {
  margin: 0.5em 0;
}
ol, ul {
  margin: 0.2em 0 0.2em 2em;
}
li {
  margin: 0.2em 0;
}
address {
  font-style: normal;
}

ul.toc ul {
  margin: 0 0 0 2em;
}
ul.toc li {
  list-style: none;
  margin: 0;
}

@media screen and (min-width: 924px) {
  body {
    padding-right: 350px;
  }
  body>ul.toc, body>#rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    z-index: 1;
    overflow: auto;
    overscroll-behavior: contain;
  }
  body>#rfc\.toc {
    top: 55px;
  }
  body>ul.toc {
    top: 100px;
  }

  ul.toc {
    margin: 0 0 0 4px;
    font-size: 12px;
    line-height: 20px;
  }
  ul.toc ul {
    margin-left: 1.2em;
  }
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>
  <meta name="viewport" content="initial-scale=1.0">

<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">WebTransport-H3</td>
<td class="right">January 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Vasiliev</td>
<td class="center">Expires 31 July 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-vvv-webtransport-http3-latest</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-01-27" class="published">27 January 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-07-31">31 July 2021</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">V. Vasiliev</div>
<div class="org">Google</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">WebTransport over HTTP/3</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">WebTransport <span>[<a href="#OVERVIEW" class="xref">OVERVIEW</a>]</span> is a protocol framework that enables clients
constrained by the Web security model to communicate with a remote server using
a secure multiplexed transport.  This document describes a WebTransport
protocol that is based on HTTP/3 <span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span> and provides support for
unidirectional streams, bidirectional streams and datagrams, all multiplexed
within the same HTTP/3 connection.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-note-to-readers">
<a href="#name-note-to-readers" class="section-name selfRef">Note to Readers</a>
      </h2>
<p id="section-note.1-1">Discussion of this draft takes place on the WebTransport mailing list
(webtransport@ietf.org), which is archived at
&lt;https://mailarchive.ietf.org/arch/search/?email_list=webtransport&gt;.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">The repository tracking the issues for this draft can be found at
&lt;https://github.com/vasilvv/webtransport/issues&gt;.  The web API draft
corresponding to this document can be found at
&lt;https://w3c.github.io/webtransport/&gt;.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 31 July 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-protocol-overview" class="xref">Protocol Overview</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-session-establishment" class="xref">Session Establishment</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-establishing-a-transport-ca" class="xref">Establishing a Transport-Capable HTTP/3 Connection</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-extended-connect-in-http-3" class="xref">Extended CONNECT in HTTP/3</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-creating-a-new-session" class="xref">Creating a New Session</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-limiting-the-number-of-simu" class="xref">Limiting the Number of Simultaneous Sessions</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-webtransport-features" class="xref">WebTransport Features</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-unidirectional-streams" class="xref">Unidirectional streams</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-client-initiated-bidirectio" class="xref">Client-Initiated Bidirectional Streams</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-server-initiated-bidirectio" class="xref">Server-Initiated Bidirectional Streams</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-datagrams" class="xref">Datagrams</a><a href="#section-toc.1-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-session-termination" class="xref">Session Termination</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-transport-properties" class="xref">Transport Properties</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-upgrade-token-registration" class="xref">Upgrade Token Registration</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-http-3-settings-parameter-r" class="xref">HTTP/3 SETTINGS Parameter Registration</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.8.2.3">
                <p id="section-toc.1-1.8.2.3.1"><a href="#section-8.3" class="xref">8.3</a>.  <a href="#name-frame-type-registration" class="xref">Frame Type Registration</a><a href="#section-toc.1-1.8.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.8.2.4">
                <p id="section-toc.1-1.8.2.4.1"><a href="#section-8.4" class="xref">8.4</a>.  <a href="#name-stream-type-registration" class="xref">Stream Type Registration</a><a href="#section-toc.1-1.8.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
<ul class="compact ulEmpty toc">
<li class="compact ulEmpty toc" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.9.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="compact ulEmpty toc" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.9.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="compact ulEmpty toc" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">HTTP/3 <span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span> is a protocol defined on top of QUIC <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span> that can
multiplex HTTP requests over a QUIC connection.  This document defines
a mechanism for multiplexing non-HTTP data with HTTP/3 in a
manner that conforms with the WebTransport protocol requirements and semantics
<span>[<a href="#OVERVIEW" class="xref">OVERVIEW</a>]</span>.  Using the mechanism described here, multiple WebTransport
instances can be multiplexed simultaneously with regular HTTP traffic on the
same HTTP/3 connection.<a href="#section-1-1" class="pilcrow">¶</a></p>
<div id="terminology">
<section id="section-1.1">
        <h3 id="name-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
when, and only when, they appear in all capitals, as shown here.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">This document follows terminology defined in Section 1.2 of <span>[<a href="#OVERVIEW" class="xref">OVERVIEW</a>]</span>.  Note
that this document distinguishes between a WebTransport server and an HTTP/3
server.  An HTTP/3 server is the server that terminates HTTP/3 connections; a
WebTransport server is an application that accepts WebTransport sessions, which
can be accessed via an HTTP/3 server.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="protocol-overview">
<section id="section-2">
      <h2 id="name-protocol-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-protocol-overview" class="section-name selfRef">Protocol Overview</a>
      </h2>
<p id="section-2-1">WebTransport servers in general are identified by a pair of authority value and
path value (defined in <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span> Sections 3.2 and 3.3 correspondingly).<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">When an HTTP/3 connection is established, both the client and server have to
send a SETTINGS_ENABLE_WEBTRANSPORT setting in order to indicate that they
both support WebTransport over HTTP/3.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">WebTransport sessions are initiated inside a given HTTP/3 connection by the
client, who sends an extended CONNECT request <span>[<a href="#RFC8441" class="xref">RFC8441</a>]</span>.  If the server
accepts the request, an WebTransport session is established.  The resulting
stream will be further referred to as a <em>CONNECT stream</em>, and its stream ID is
used to uniquely identify a given WebTransport session within the connection.
The ID of the CONNECT stream that established a given WebTransport session will
be further referred to as a <em>Session ID</em>.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">After the session is established, the peers can exchange data using the
following mechanisms:<a href="#section-2-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-5.1">A client can create a bidirectional stream using a special indefinite-length
HTTP/3 frame that transfers ownership of the stream to WebTransport.<a href="#section-2-5.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-5.2">A server can create a bidirectional stream, which is possible since HTTP/3
does not define any semantics for server-initiated bidirectional streams.<a href="#section-2-5.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-5.3">Both client and server can create a unidirectional stream using a special
stream type.<a href="#section-2-5.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-5.4">A datagram can be sent using a QUIC DATAGRAM frame <span>[<a href="#QUIC-DATAGRAM" class="xref">QUIC-DATAGRAM</a>]</span>.<a href="#section-2-5.4" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-2-6">An WebTransport session is terminated when the CONNECT stream that created it
is closed.<a href="#section-2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="session-establishment">
<section id="section-3">
      <h2 id="name-session-establishment">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-session-establishment" class="section-name selfRef">Session Establishment</a>
      </h2>
<div id="establishing-a-transport-capable-http3-connection">
<section id="section-3.1">
        <h3 id="name-establishing-a-transport-ca">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-establishing-a-transport-ca" class="section-name selfRef">Establishing a Transport-Capable HTTP/3 Connection</a>
        </h3>
<p id="section-3.1-1">In order to indicate support for WebTransport, both the client and the server
MUST send a SETTINGS_ENABLE_WEBTRANSPORT value set to "1" in their SETTINGS
frame.  Endpoints MUST NOT use any WebTransport-related functionality unless
the parameter has been negotiated.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">If SETTINGS_ENABLE_WEBTRANSPORT is negotiated, support for the QUIC DATAGRAMs
within HTTP/3 MUST be negotiated as described in
<span>[<a href="#HTTP3-DATAGRAM" class="xref">HTTP3-DATAGRAM</a>]</span>; negotiating WebTransport
support without negotiating QUIC DATAGRAM extension SHALL result in a
H3_SETTINGS_ERROR error.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3"><span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span> requires client's <code>initial_max_bidi_streams</code> transport parameter to be
set to zero.  Existing implementation might enforce this requirement before
negotiating settings; thus, the client MUST send a non-zero MAX_STREAMS for
client-initiated bidirectional streams after receiving an appropriate SETTINGS
frame from the server.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="extended-connect-in-http3">
<section id="section-3.2">
        <h3 id="name-extended-connect-in-http-3">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-extended-connect-in-http-3" class="section-name selfRef">Extended CONNECT in HTTP/3</a>
        </h3>
<p id="section-3.2-1"><span>[<a href="#RFC8441" class="xref">RFC8441</a>]</span> defines an extended CONNECT method in Section 4, enabled by the
SETTINGS_ENABLE_CONNECT_PROTOCOL parameter.  That parameter is only defined for
HTTP/2.  This document does not create a new multi-purpose parameter to
indicate support for extended CONNECT in HTTP/3; instead, the
SETTINGS_ENABLE_WEBTRANSPORT setting implies that an endpoint supports extended
CONNECT.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="creating-a-new-session">
<section id="section-3.3">
        <h3 id="name-creating-a-new-session">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-creating-a-new-session" class="section-name selfRef">Creating a New Session</a>
        </h3>
<p id="section-3.3-1">As WebTransport sessions are established over HTTP/3, they are identified
using the <code>https</code> URI scheme <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">In order to create a new WebTransport session, a client can send an HTTP
CONNECT request.  The <code>:protocol</code> pseudo-header field (<span>[<a href="#RFC8441" class="xref">RFC8441</a>]</span>) MUST be
set to <code>webtransport</code>.  The <code>:scheme</code> field MUST be <code>https</code>.  Both the
<code>:authority</code> and the <code>:path</code> value MUST be set; those fields indicate the
desired WebTransport server.  An <code>Origin</code> header <span>[<a href="#RFC6454" class="xref">RFC6454</a>]</span> MUST be provided
within the request.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">Upon receiving an extended CONNECT request with a <code>:protocol</code> field set to
<code>webtransport</code>, the HTTP/3 server can check if it has a WebTransport
server associated with the specified <code>:authority</code> and <code>:path</code> values.  If it
does not, it SHOULD reply with status code 404 (Section 6.5.4, <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>).
If it does, it MAY accept the session by replying with status code 200.
The WebTransport server MUST verify the <code>Origin</code> header to ensure that the
specified origin is allowed to access the server in question.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<p id="section-3.3-4">From the client's perspective, a WebTransport session is established when the
client receives a 200 response.  From the server's perspective, a session is
established once it sends a 200 response.  Both endpoints MUST NOT open any
streams or send any datagrams on a given session before that session is
established.  WebTransport over HTTP/3 does not support 0-RTT.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="limiting-the-number-of-simultaneous-sessions">
<section id="section-3.4">
        <h3 id="name-limiting-the-number-of-simu">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-limiting-the-number-of-simu" class="section-name selfRef">Limiting the Number of Simultaneous Sessions</a>
        </h3>
<p id="section-3.4-1">From the flow control perspective, WebTransport sessions count against the
stream flow control just like regular HTTP requests, since they are established
via an HTTP CONNECT request.  This document does not make any effort to
introduce a separate flow control mechanism for sessions, nor to separate HTTP
requests from WebTransport data streams.  If the server needs to limit the rate
of incoming requests, it has alternative mechanisms at its disposal:<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.4-2.1">
            <code>HTTP_REQUEST_REJECTED</code> error code defined in <span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span> indicates to the
receiving HTTP/3 stack that the request was not processed in any way.<a href="#section-3.4-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.4-2.2">HTTP status code 429 indicates that the request was rejected due to rate
limiting <span>[<a href="#RFC6585" class="xref">RFC6585</a>]</span>.  Unlike the previous method, this signal is directly
propagated to the application.<a href="#section-3.4-2.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="webtransport-features">
<section id="section-4">
      <h2 id="name-webtransport-features">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-webtransport-features" class="section-name selfRef">WebTransport Features</a>
      </h2>
<p id="section-4-1">WebTransport over HTTP/3 provides the following features described in <span>[<a href="#OVERVIEW" class="xref">OVERVIEW</a>]</span>:
unidirectional streams, bidirectional streams and datagrams, initiated by
either endpoint.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">Session IDs are used to demultiplex streams and datagrams belonging to different
WebTransport sessions.  On the wire, session IDs are encoded using the QUIC
variable length integer scheme described in <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-4-2" class="pilcrow">¶</a></p>
<div id="unidirectional-streams">
<section id="section-4.1">
        <h3 id="name-unidirectional-streams">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-unidirectional-streams" class="section-name selfRef">Unidirectional streams</a>
        </h3>
<p id="section-4.1-1">Once established, both endpoints can open unidirectional streams.  The HTTP/3
control stream type SHALL be 0x54.  The body of the stream SHALL be the stream
type, followed by the session ID, encoded as a variable-length integer, followed
by the user-specified stream data (<a href="#fig-unidi" class="xref">Figure 1</a>).<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<span id="name-unidirectional-webtransport"></span><div id="fig-unidi">
<figure id="figure-1">
          <div class="artwork art-text alignLeft art-drawing" id="section-4.1-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           0x54 (i)                          ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Session ID (i)                       ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                         Stream Body                         ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-unidirectional-webtransport" class="selfRef">Unidirectional WebTransport stream format</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="client-initiated-bidirectional-streams">
<section id="section-4.2">
        <h3 id="name-client-initiated-bidirectio">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-client-initiated-bidirectio" class="section-name selfRef">Client-Initiated Bidirectional Streams</a>
        </h3>
<p id="section-4.2-1">WebTransport clients can initiate bidirectional streams by opening an HTTP/3
bidirectional stream and sending an HTTP/3 frame with type
<code>WEBTRANSPORT_STREAM</code> (type=0x41).  The format of the frame SHALL be the frame
type, followed by the session ID, encoded as a variable-length integer,
followed by the user-specified stream data (<a href="#fig-bidi-client" class="xref">Figure 2</a>).  The frame
SHALL last until the end of the stream.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<span id="name-webtransport_stream-frame-f"></span><div id="fig-bidi-client">
<figure id="figure-2">
          <div class="artwork art-text alignLeft art-drawing" id="section-4.2-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                           0x41 (i)                          ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Session ID (i)                       ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                         Stream Body                         ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-webtransport_stream-frame-f" class="selfRef">WEBTRANSPORT_STREAM frame format</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="server-initiated-bidirectional-streams">
<section id="section-4.3">
        <h3 id="name-server-initiated-bidirectio">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-server-initiated-bidirectio" class="section-name selfRef">Server-Initiated Bidirectional Streams</a>
        </h3>
<p id="section-4.3-1">WebTransport servers can initiate bidirectional streams by opening a
bidirectional stream within the HTTP/3 connection.  Note that since HTTP/3 does
not define any semantics for server-initiated bidirectional streams, this
document is a normative reference for the semantics of such streams for all
HTTP/3 connections in which the SETTINGS_ENABLE_WEBTRANSPORT option is negotiated.
The format of those streams SHALL be the session ID, encoded as a
variable-length integer, followed by the user-specified stream data
(<a href="#fig-bidi-server" class="xref">Figure 3</a>).<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<span id="name-server-initiated-bidirection"></span><div id="fig-bidi-server">
<figure id="figure-3">
          <div class="artwork art-text alignLeft art-drawing" id="section-4.3-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Session ID (i)                       ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                         Stream Body                         ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-server-initiated-bidirection" class="selfRef">Server-initiated bidirectional stream format</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="datagrams">
<section id="section-4.4">
        <h3 id="name-datagrams">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-datagrams" class="section-name selfRef">Datagrams</a>
        </h3>
<p id="section-4.4-1">Datagrams can be sent using the DATAGRAM frame as defined in <span>[<a href="#QUIC-DATAGRAM" class="xref">QUIC-DATAGRAM</a>]</span>
and <span>[<a href="#HTTP3-DATAGRAM" class="xref">HTTP3-DATAGRAM</a>]</span>.  For all HTTP/3 connections in which the
SETTINGS_ENABLE_WEBTRANSPORT option is negotiated, the Flow Identifier is set
to the session ID.  In other words, the format of datagrams SHALL be the
session ID, followed by the user-specified payload (<a href="#fig-datagram" class="xref">Figure 4</a>).<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<span id="name-datagram-format"></span><div id="fig-datagram">
<figure id="figure-4">
          <div class="artwork art-text alignLeft art-drawing" id="section-4.4-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Session ID (i)                       ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |                        Datagram Body                        ...
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-datagram-format" class="selfRef">Datagram format</a>
          </figcaption></figure>
</div>
<p id="section-4.4-3">In QUIC, a datagram frame can span at most one packet.  Because of that, the
applications have to know the maximum size of the datagram they can send.
However, when proxying the datagrams, the hop-by-hop MTUs can vary.
TODO: Describe how the path MTU can be computed, specifically propagation across
HTTP proxies.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="session-termination">
<section id="section-5">
      <h2 id="name-session-termination">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-session-termination" class="section-name selfRef">Session Termination</a>
      </h2>
<p id="section-5-1">An WebTransport session over HTTP/3 is terminated when either endpoint closes
the stream associated with the CONNECT request that initiated the session.
Upon learning about the session being terminated, the endpoint MUST stop
sending new datagrams and reset all of the streams associated with the session.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transport-properties">
<section id="section-6">
      <h2 id="name-transport-properties">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-transport-properties" class="section-name selfRef">Transport Properties</a>
      </h2>
<p id="section-6-1">WebTransport over HTTP/3 supports most of the WebTransport features described
in <a href="#properties" class="xref">Table 1</a>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<span id="name-transport-properties-of-web"></span><div id="properties">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-transport-properties-of-web" class="selfRef">Transport properties of WebTransport over HTTP/3</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Property</th>
            <th class="text-left" rowspan="1" colspan="1">Support</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Stream independence</td>
            <td class="text-left" rowspan="1" colspan="1">Always supported</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Partial reliability</td>
            <td class="text-left" rowspan="1" colspan="1">Always supported</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Pooling support</td>
            <td class="text-left" rowspan="1" colspan="1">Always supported</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Connection mobility</td>
            <td class="text-left" rowspan="1" colspan="1">Implementation-dependent</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<div id="security-considerations">
<section id="section-7">
      <h2 id="name-security-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">WebTransport over HTTP/3 satisfies all of the security requirements imposed by
<span>[<a href="#OVERVIEW" class="xref">OVERVIEW</a>]</span> on WebTransport protocols, thus providing a secure framework for
client-server communication in cases when the client is potentially untrusted.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">WebTransport over HTTP/3 requires explicit opt-in through the use of a QUIC
transport parameter; this avoids potential protocol confusion attacks by
ensuring the HTTP/3 server explicitly supports it.  It also requires the use of
the Origin header, providing the server with the ability to deny access to
Web-based clients that do not originate from a trusted origin.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">Just like HTTP traffic going over HTTP/3, WebTransport pools traffic to different origins
within a single connection.  Different origins imply different trust domains,
meaning that the implementations have to treat each transport as potentially
hostile towards others on the same connection.  One potential attack is a
resource exhaustion attack: since all of the transports share both congestion
control and flow control context, a single client aggressively using up those
resources can cause other transports to stall.  The user agent thus SHOULD
implement a fairness scheme that ensures that each transport within connection
gets a reasonable share of controlled resources; this applies both to sending
data and to opening new streams.<a href="#section-7-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="upgrade-token-registration">
<section id="section-8.1">
        <h3 id="name-upgrade-token-registration">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-upgrade-token-registration" class="section-name selfRef">Upgrade Token Registration</a>
        </h3>
<p id="section-8.1-1">The following entry is added to the "Hypertext Transfer Protocol (HTTP) Upgrade
Token Registry" registry established by <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>:<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<p id="section-8.1-2">The "webtransport" label identifies HTTP/3 used as a protocol for WebTransport:<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.1-3">
          <dt id="section-8.1-3.1">Value:</dt>
          <dd style="margin-left: 1.5em" id="section-8.1-3.2">
  webtransport<a href="#section-8.1-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.3">Description:</dt>
          <dd style="margin-left: 1.5em" id="section-8.1-3.4">
  WebTransport over HTTP/3<a href="#section-8.1-3.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.1-3.5">Reference:</dt>
          <dd style="margin-left: 1.5em" id="section-8.1-3.6">
  This document and <span>[<a href="#I-D.kinnear-webtransport-http2" class="xref">I-D.kinnear-webtransport-http2</a>]</span><a href="#section-8.1-3.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="http3-settings-parameter-registration">
<section id="section-8.2">
        <h3 id="name-http-3-settings-parameter-r">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-http-3-settings-parameter-r" class="section-name selfRef">HTTP/3 SETTINGS Parameter Registration</a>
        </h3>
<p id="section-8.2-1">The following entry is added to the "HTTP/3 Settings" registry established by
<span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span>:<a href="#section-8.2-1" class="pilcrow">¶</a></p>
<p id="section-8.2-2">The <code>SETTINGS_ENABLE_WEBTRANSPORT</code> parameter indicates that the specified
HTTP/3 connection is WebTransport-capable.<a href="#section-8.2-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.2-3">
          <dt id="section-8.2-3.1">Setting Name:</dt>
          <dd style="margin-left: 1.5em" id="section-8.2-3.2">
  ENABLE_WEBTRANSPORT<a href="#section-8.2-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.2-3.3">Value:</dt>
          <dd style="margin-left: 1.5em" id="section-8.2-3.4">
  0x2b603742<a href="#section-8.2-3.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.2-3.5">Default:</dt>
          <dd style="margin-left: 1.5em" id="section-8.2-3.6">
  0<a href="#section-8.2-3.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.2-3.7">Specification:</dt>
          <dd style="margin-left: 1.5em" id="section-8.2-3.8">
  This document<a href="#section-8.2-3.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="frame-type-registration">
<section id="section-8.3">
        <h3 id="name-frame-type-registration">
<a href="#section-8.3" class="section-number selfRef">8.3. </a><a href="#name-frame-type-registration" class="section-name selfRef">Frame Type Registration</a>
        </h3>
<p id="section-8.3-1">The following entry is added to the "HTTP/3 Frame Type" registry established by
<span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span>:<a href="#section-8.3-1" class="pilcrow">¶</a></p>
<p id="section-8.3-2">The <code>WEBTRANSPORT_STREAM</code> frame allows HTTP/3 client-initiated bidirectional
streams to be used by WebTransport:<a href="#section-8.3-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.3-3">
          <dt id="section-8.3-3.1">Code:</dt>
          <dd style="margin-left: 1.5em" id="section-8.3-3.2">
  0x54<a href="#section-8.3-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.3-3.3">Frame Type:</dt>
          <dd style="margin-left: 1.5em" id="section-8.3-3.4">
  WEBTRANSPORT_STREAM<a href="#section-8.3-3.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.3-3.5">Specification:</dt>
          <dd style="margin-left: 1.5em" id="section-8.3-3.6">
  This document<a href="#section-8.3-3.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
<div id="stream-type-registration">
<section id="section-8.4">
        <h3 id="name-stream-type-registration">
<a href="#section-8.4" class="section-number selfRef">8.4. </a><a href="#name-stream-type-registration" class="section-name selfRef">Stream Type Registration</a>
        </h3>
<p id="section-8.4-1">The following entry is added to the "HTTP/3 Stream Type" registry established by
<span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span>:<a href="#section-8.4-1" class="pilcrow">¶</a></p>
<p id="section-8.4-2">The "WebTransport stream" type allows unidirectional streams to be used by
WebTransport:<a href="#section-8.4-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8.4-3">
          <dt id="section-8.4-3.1">Code:</dt>
          <dd style="margin-left: 1.5em" id="section-8.4-3.2">
  0x41<a href="#section-8.4-3.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.4-3.3">Stream Type:</dt>
          <dd style="margin-left: 1.5em" id="section-8.4-3.4">
  WebTransport stream<a href="#section-8.4-3.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.4-3.5">Specification:</dt>
          <dd style="margin-left: 1.5em" id="section-8.4-3.6">
  This document<a href="#section-8.4-3.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-8.4-3.7">Sender:</dt>
          <dd style="margin-left: 1.5em" id="section-8.4-3.8">
  Both<a href="#section-8.4-3.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<section id="section-9">
      <h2 id="name-references">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-9.1">
        <h3 id="name-normative-references">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="HTTP3">[HTTP3]</dt>
        <dd>
<span class="refAuthor">Bishop, M., Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 3 (HTTP/3)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-http</span>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-quic-http">https://tools.ietf.org/html/draft-ietf-quic-http</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP3-DATAGRAM">[HTTP3-DATAGRAM]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span><span class="refAuthor"> and L. Pardue</span>, <span class="refTitle">"Using QUIC Datagrams with HTTP/3"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-schinazi-masque-h3-datagram-04</span>, <time datetime="2021-01-05" class="refDate">5 January 2021</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-schinazi-masque-h3-datagram-04.txt">http://www.ietf.org/internet-drafts/draft-schinazi-masque-h3-datagram-04.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="OVERVIEW">[OVERVIEW]</dt>
        <dd>
<span class="refAuthor">Vasiliev, V.</span>, <span class="refTitle">"The WebTransport Protocol Framework"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-webtrans-overview-latest</span>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-webtrans-overview-latest">https://tools.ietf.org/html/draft-ietf-webtrans-overview-latest</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-DATAGRAM">[QUIC-DATAGRAM]</dt>
        <dd>
<span class="refAuthor">Pauly, T.</span><span class="refAuthor">, Kinnear, E.</span><span class="refAuthor">, and D. Schinazi</span>, <span class="refTitle">"An Unreliable Datagram Extension to QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-pauly-quic-datagram</span>, <span>&lt;<a href="https://tools.ietf.org/html/draft-pauly-quic-datagram">https://tools.ietf.org/html/draft-pauly-quic-datagram</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-TRANSPORT">[QUIC-TRANSPORT]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span><span class="refAuthor"> and M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-transport</span>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-quic-transport">https://tools.ietf.org/html/draft-ietf-quic-transport</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3986">[RFC3986]</dt>
        <dd>
<span class="refAuthor">Berners-Lee, T.</span><span class="refAuthor">, Fielding, R.</span><span class="refAuthor">, and L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01" class="refDate">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6454">[RFC6454]</dt>
        <dd>
<span class="refAuthor">Barth, A.</span>, <span class="refTitle">"The Web Origin Concept"</span>, <span class="seriesInfo">RFC 6454</span>, <span class="seriesInfo">DOI 10.17487/RFC6454</span>, <time datetime="2011-12" class="refDate">December 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6454">https://www.rfc-editor.org/info/rfc6454</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6585">[RFC6585]</dt>
        <dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor"> and R. Fielding</span>, <span class="refTitle">"Additional HTTP Status Codes"</span>, <span class="seriesInfo">RFC 6585</span>, <span class="seriesInfo">DOI 10.17487/RFC6585</span>, <time datetime="2012-04" class="refDate">April 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6585">https://www.rfc-editor.org/info/rfc6585</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7230">[RFC7230]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span><span class="refAuthor"> and J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"</span>, <span class="seriesInfo">RFC 7230</span>, <span class="seriesInfo">DOI 10.17487/RFC7230</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7230">https://www.rfc-editor.org/info/rfc7230</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7231">[RFC7231]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span><span class="refAuthor"> and J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"</span>, <span class="seriesInfo">RFC 7231</span>, <span class="seriesInfo">DOI 10.17487/RFC7231</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7231">https://www.rfc-editor.org/info/rfc7231</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8441">[RFC8441]</dt>
      <dd>
<span class="refAuthor">McManus, P.</span>, <span class="refTitle">"Bootstrapping WebSockets with HTTP/2"</span>, <span class="seriesInfo">RFC 8441</span>, <span class="seriesInfo">DOI 10.17487/RFC8441</span>, <time datetime="2018-09" class="refDate">September 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8441">https://www.rfc-editor.org/info/rfc8441</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-9.2">
        <h3 id="name-informative-references">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.kinnear-webtransport-http2">[I-D.kinnear-webtransport-http2]</dt>
      <dd>
<span class="refAuthor">Frindell, A.</span><span class="refAuthor">, Kinnear, E.</span><span class="refAuthor">, Pauly, T.</span><span class="refAuthor">, Vasiliev, V.</span><span class="refAuthor">, and G. Xie</span>, <span class="refTitle">"WebTransport using HTTP/2"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-kinnear-webtransport-http2-01</span>, <time datetime="2020-07-13" class="refDate">13 July 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-kinnear-webtransport-http2-01.txt">http://www.ietf.org/internet-drafts/draft-kinnear-webtransport-http2-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Victor Vasiliev</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:vasilvv@google.com" class="email">vasilvv@google.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
